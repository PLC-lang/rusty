(*****************************************************************************
 * Copyright (c) 2025 Bachmann electronic GmbH                               *
 *****************************************************************************)
 (**
 * @addtogroup Error
 * @brief General error functions.
 * @{
*)
(**
 * @brief Error code structure.
 *
 * Used to store the error components:
 *   - library
 *   - reason
 *   - function
 *)
TYPE ErrorCode :
STRUCT
    Lib     : UINT;     (**< Error library code *)
    Reason  : UINT;     (**< Error reason code *)
    Func    : UDINT;    (**< Error function code *)
END_STRUCT
END_TYPE
(**
 * @brief Make an Error structure from an error code.
 *
 * @param[in] Error The error code
 *
 * @return Error code structure
*)
FUNCTION Error_MakeErrorCode : ErrorCode
VAR_INPUT
    Error : LINT;
END_VAR
END_FUNCTION
(**
 * @brief Check if error is ok (i.e. reason == M_ERROR_OK ).
 *
 * @param[in] ErrCode The error code structure
 * @return true if error is ok, false otherwise
 *)
FUNCTION Error_IsOk : BOOL
VAR_INPUT
    ErrCode : ErrorCode;
END_VAR
END_FUNCTION
(**
 * @brief Check if error is not ok (i.e. reason != M_ERROR_OK ).
 *
 * @param[in] ErrCode The error code structure
 * @return true if error is not ok, false otherwise
 *)
FUNCTION Error_IsNOk : BOOL
VAR_INPUT
    ErrCode : ErrorCode;
END_VAR
END_FUNCTION
(**
 * @brief Check if error is a system error.
 *
 * @param[in] ErrCode The error code structure
 * @return true if system error, false otherwise
 *
 * @see *Error_IsGeneral()
 * @see *Error_IsCustom()
 *)
FUNCTION Error_IsSystem : BOOL
VAR_INPUT
    ErrCode : ErrorCode;
END_VAR
END_FUNCTION
(**
 * @brief Check if error is in general error range.
 *
 * @param[in] ErrCode The error code structure
 * @return true if general error, false otherwise
 *
 * @see *Error_IsSystem()
 * @see *Error_IsCustom()
 *)
FUNCTION Error_IsGeneral : BOOL
VAR_INPUT
    ErrCode : ErrorCode;
END_VAR
END_FUNCTION
(**
 * @brief Check if error is in custom error range.
 *
 * @param[in] ErrCode The error code structure
 * @return true if error is in custom error range, false otherwise
 *
 * @see *Error_IsSystem()
 * @see *Error_IsGeneral()
 *)
FUNCTION Error_IsCustom : BOOL
VAR_INPUT
    ErrCode : ErrorCode;
END_VAR
END_FUNCTION
(**
 * @brief Generate a human-readable string representing the error code.
 *
 * The string will have the following format:
 * error-code [Library: lib-name (lib-code), Function: func-name (func-code), Reason: reason-string (reason-code)]
 * error-code is a 64 bit hexadecimal number and others are ASCII text.
 *
 * @param[in] ErrCode The error code structure to translate
 *
 * @return String representation of the error code
 *)
FUNCTION Error_String : STRING[1023]
VAR_INPUT
    ErrCode : ErrorCode;
END_VAR
END_FUNCTION
(**
 * @brief Get the human-readable library name from an error.
 *
 * @param[in] ErrCode The error code structure to translate
 *
 * @return String representation of the library error code
 *)
FUNCTION Error_LibString : STRING[1023]
VAR_INPUT
    ErrCode : ErrorCode;
END_VAR
END_FUNCTION
(**
 * @brief Get the human-readable function name from an error.
 *
 * @param[in] ErrCode The error code structure to translate
 *
 * @return String representation of the function error code
 *)
FUNCTION Error_FuncString : STRING[1023]
VAR_INPUT
    ErrCode : ErrorCode;
END_VAR
END_FUNCTION
(**
 * @brief Get the human-readable reason from an error.
 *
 * @param[in] ErrCode The error code structure to translate
 *
 * @return String representation of the reason error code
 *)
FUNCTION Error_ReasonString : STRING[1023]
VAR_INPUT
    ErrCode : ErrorCode;
END_VAR
END_FUNCTION
(**
 * @}
*)
