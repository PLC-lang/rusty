<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Get a file descriptor that can be used to wait for readiness in an external runtime."><title>reactor_fd in async_io::os::unix - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-492a78a4a87dcc01.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="async_io" data-themes="" data-resource-suffix="" data-rustdoc-version="1.82.0 (f6e511eec 2024-10-15)" data-channel="1.82.0" data-search-js="search-a99f1315e7cc5121.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../static.files/main-921df33f47b8780c.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-3b12f09e550e0385.css"></noscript><link rel="icon" href="https://raw.githubusercontent.com/smol-rs/smol/master/assets/images/logo_fullsize_transparent.png"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../../async_io/index.html"><img src="https://raw.githubusercontent.com/smol-rs/smol/master/assets/images/logo_fullsize_transparent.png" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../../async_io/index.html"><img src="https://raw.githubusercontent.com/smol-rs/smol/master/assets/images/logo_fullsize_transparent.png" alt="logo"></a><h2><a href="../../../async_io/index.html">async_<wbr>io</a><span class="version">2.3.4</span></h2></div><div class="sidebar-elems"><h2><a href="index.html">In async_<wbr>io::<wbr>os::<wbr>unix</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Function <a href="../../index.html">async_io</a>::<wbr><a href="../index.html">os</a>::<wbr><a href="index.html">unix</a>::<wbr><a class="fn" href="#">reactor_fd</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../../src/async_io/os/unix.rs.html#43-68">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub fn reactor_fd() -&gt; <a class="enum" href="https://doc.rust-lang.org/1.82.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.82.0/std/os/fd/owned/struct.BorrowedFd.html" title="struct std::os::fd::owned::BorrowedFd">BorrowedFd</a>&lt;'static&gt;&gt;</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Get a file descriptor that can be used to wait for readiness in an external runtime.</p>
<p>This file descriptor is equivalent to the one used by the underlying epoll/kqueue/event ports
instance for polling. The intention is that this file descriptor can be registered into an
external runtime (like <a href="https://docs.rs/calloop"><code>calloop</code></a> or <a href="https://en.wikipedia.org/wiki/GLib">GLib</a>) so that <code>async-io</code> can be seamlessly polled
alongside the other runtime.</p>
<p>Not every backend used on <code>unix</code> has an associated file descriptor, however. While epoll,
kqueue and event ports have a file descriptor as a backend, on some Unix systems <code>async-io</code>
will use the <code>poll()</code> system call instead. Since there are no file descriptors intrinsically
associated with <code>poll()</code>, this function will return <code>None</code>.</p>
<p>There is presently no way to stop the “<code>async-io</code>” thread from being launched, so the reactor
will still be continiously polled on that thread. This fact should be kept in mind by anyone
looking to integrate <code>async-io</code> into another runtime using this function.</p>
<p>It is possible to use this function to call raw system calls on the underlying event source.
This is generally not recommended, since registered event sources may conflict with <code>async-io</code>’s
existing scheme for managing sources. The behavior resulting from this is not specified, but
will not result in undefined behavior. This could include panics, incorrect results, aborts,
memory leaks, and non-termination.</p>
<h3 id="example"><a class="doc-anchor" href="#example">§</a>Example</h3>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#![cfg(unix)]

</span><span class="kw">use </span>async_io::os::unix::reactor_fd;

my_runtime::register(reactor_fd().unwrap());</code></pre></div>
</div></details></section></div></main></body></html>