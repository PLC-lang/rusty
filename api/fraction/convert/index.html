<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Optimistic type conversion"><title>fraction::convert - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-492a78a4a87dcc01.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="fraction" data-themes="" data-resource-suffix="" data-rustdoc-version="1.82.0 (f6e511eec 2024-10-15)" data-channel="1.82.0" data-search-js="search-a99f1315e7cc5121.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-921df33f47b8780c.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-3b12f09e550e0385.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../fraction/index.html">fraction</a><span class="version">0.13.1</span></h2></div><h2 class="location"><a href="#">Module convert</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#traits">Traits</a></li></ul></section><h2><a href="../index.html">In crate fraction</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">fraction</a>::<wbr><a class="mod" href="#">convert</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../src/fraction/convert.rs.html#1-186">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Optimistic type conversion</p>
<p>When <a href="https://doc.rust-lang.org/1.82.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">std::convert::TryFrom</a> and <a href="https://doc.rust-lang.org/1.82.0/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">std::convert::TryInto</a> get stabilised
they should be used instead. However, at this point we need our
own implementation for optional conversion between types.</p>
<p>The particular use case is when we have a data type claiming
more space than it’s using and we want to move the value into
another, smaller data type. Such operation may only be performed
at runtime with particular checks that the value fits into the
smaller data type. Otherwise we cannot perform safe cast.</p>
<h2 id="examples"><a class="doc-anchor" href="#examples">§</a>Examples</h2>
<p>Integer conversion</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>fraction::convert::TryToConvertFrom;

<span class="macro">assert_eq!</span>(<span class="prelude-val">Some</span>(<span class="number">255u8</span>), u8::try_to_convert_from(<span class="number">255u16</span>));
<span class="macro">assert_eq!</span>(<span class="prelude-val">None</span>, u8::try_to_convert_from(<span class="number">256u16</span>));</code></pre></div>
<p>Fraction conversion</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>fraction::{GenericFraction, convert::TryToConvertFrom, One};

<span class="kw">type </span>F8 = GenericFraction&lt;u8&gt;;
<span class="kw">type </span>F16 = GenericFraction&lt;u16&gt;;

<span class="kw">let </span>f8_255 = F8::new(<span class="number">255u8</span>, <span class="number">1u8</span>);
<span class="kw">let </span>f16_255 = F16::try_to_convert_from(f8_255).unwrap();
<span class="kw">let </span>f16_256 = f16_255 + F16::one();

<span class="macro">assert_eq!</span>(<span class="prelude-val">Some</span>(f8_255), F8::try_to_convert_from(f16_255));
<span class="macro">assert_eq!</span>(<span class="prelude-val">None</span>, F8::try_to_convert_from(f16_256));</code></pre></div>
</div></details><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.TryToConvertFrom.html" title="trait fraction::convert::TryToConvertFrom">TryTo<wbr>Convert<wbr>From</a></div></li></ul></section></div></main></body></html>