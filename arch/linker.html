<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Linker - RuSTy User Documentation</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="../intro_1.html"><strong aria-hidden="true">1.</strong> RuSTy</a></li><li class="chapter-item "><a href="../build_and_install.html"><strong aria-hidden="true">2.</strong> Build & Install</a></li><li class="chapter-item "><a href="../using_rusty.html"><strong aria-hidden="true">3.</strong> Using RuSTy</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../using_rusty/build_configuration.html"><strong aria-hidden="true">3.1.</strong> Build Configuration</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.html"><strong aria-hidden="true">3.2.</strong> Error Configuration</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E001.html"><strong aria-hidden="true">3.2.1.</strong> E001</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E002.html"><strong aria-hidden="true">3.2.2.</strong> E002</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E003.html"><strong aria-hidden="true">3.2.3.</strong> E003</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E004.html"><strong aria-hidden="true">3.2.4.</strong> E004</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E005.html"><strong aria-hidden="true">3.2.5.</strong> E005</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E006.html"><strong aria-hidden="true">3.2.6.</strong> E006</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E007.html"><strong aria-hidden="true">3.2.7.</strong> E007</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E008.html"><strong aria-hidden="true">3.2.8.</strong> E008</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E009.html"><strong aria-hidden="true">3.2.9.</strong> E009</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E010.html"><strong aria-hidden="true">3.2.10.</strong> E010</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E011.html"><strong aria-hidden="true">3.2.11.</strong> E011</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E012.html"><strong aria-hidden="true">3.2.12.</strong> E012</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E013.html"><strong aria-hidden="true">3.2.13.</strong> E013</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E014.html"><strong aria-hidden="true">3.2.14.</strong> E014</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E015.html"><strong aria-hidden="true">3.2.15.</strong> E015</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E016.html"><strong aria-hidden="true">3.2.16.</strong> E016</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E017.html"><strong aria-hidden="true">3.2.17.</strong> E017</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E018.html"><strong aria-hidden="true">3.2.18.</strong> E018</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E019.html"><strong aria-hidden="true">3.2.19.</strong> E019</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E020.html"><strong aria-hidden="true">3.2.20.</strong> E020</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E021.html"><strong aria-hidden="true">3.2.21.</strong> E021</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E022.html"><strong aria-hidden="true">3.2.22.</strong> E022</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E023.html"><strong aria-hidden="true">3.2.23.</strong> E023</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E024.html"><strong aria-hidden="true">3.2.24.</strong> E024</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E025.html"><strong aria-hidden="true">3.2.25.</strong> E025</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E026.html"><strong aria-hidden="true">3.2.26.</strong> E026</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E027.html"><strong aria-hidden="true">3.2.27.</strong> E027</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E028.html"><strong aria-hidden="true">3.2.28.</strong> E028</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E029.html"><strong aria-hidden="true">3.2.29.</strong> E029</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E030.html"><strong aria-hidden="true">3.2.30.</strong> E030</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E031.html"><strong aria-hidden="true">3.2.31.</strong> E031</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E032.html"><strong aria-hidden="true">3.2.32.</strong> E032</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E033.html"><strong aria-hidden="true">3.2.33.</strong> E033</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E034.html"><strong aria-hidden="true">3.2.34.</strong> E034</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E035.html"><strong aria-hidden="true">3.2.35.</strong> E035</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E036.html"><strong aria-hidden="true">3.2.36.</strong> E036</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E037.html"><strong aria-hidden="true">3.2.37.</strong> E037</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E038.html"><strong aria-hidden="true">3.2.38.</strong> E038</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E039.html"><strong aria-hidden="true">3.2.39.</strong> E039</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E040.html"><strong aria-hidden="true">3.2.40.</strong> E040</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E041.html"><strong aria-hidden="true">3.2.41.</strong> E041</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E042.html"><strong aria-hidden="true">3.2.42.</strong> E042</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E043.html"><strong aria-hidden="true">3.2.43.</strong> E043</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E044.html"><strong aria-hidden="true">3.2.44.</strong> E044</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E045.html"><strong aria-hidden="true">3.2.45.</strong> E045</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E046.html"><strong aria-hidden="true">3.2.46.</strong> E046</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E047.html"><strong aria-hidden="true">3.2.47.</strong> E047</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E048.html"><strong aria-hidden="true">3.2.48.</strong> E048</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E049.html"><strong aria-hidden="true">3.2.49.</strong> E049</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E050.html"><strong aria-hidden="true">3.2.50.</strong> E050</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E051.html"><strong aria-hidden="true">3.2.51.</strong> E051</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E052.html"><strong aria-hidden="true">3.2.52.</strong> E052</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E053.html"><strong aria-hidden="true">3.2.53.</strong> E053</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E054.html"><strong aria-hidden="true">3.2.54.</strong> E054</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E055.html"><strong aria-hidden="true">3.2.55.</strong> E055</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E056.html"><strong aria-hidden="true">3.2.56.</strong> E056</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E057.html"><strong aria-hidden="true">3.2.57.</strong> E057</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E058.html"><strong aria-hidden="true">3.2.58.</strong> E058</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E059.html"><strong aria-hidden="true">3.2.59.</strong> E059</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E060.html"><strong aria-hidden="true">3.2.60.</strong> E060</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E061.html"><strong aria-hidden="true">3.2.61.</strong> E061</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E062.html"><strong aria-hidden="true">3.2.62.</strong> E062</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E063.html"><strong aria-hidden="true">3.2.63.</strong> E063</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E064.html"><strong aria-hidden="true">3.2.64.</strong> E064</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E065.html"><strong aria-hidden="true">3.2.65.</strong> E065</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E066.html"><strong aria-hidden="true">3.2.66.</strong> E066</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E067.html"><strong aria-hidden="true">3.2.67.</strong> E067</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E068.html"><strong aria-hidden="true">3.2.68.</strong> E068</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E069.html"><strong aria-hidden="true">3.2.69.</strong> E069</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E070.html"><strong aria-hidden="true">3.2.70.</strong> E070</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E071.html"><strong aria-hidden="true">3.2.71.</strong> E071</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E072.html"><strong aria-hidden="true">3.2.72.</strong> E072</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E073.html"><strong aria-hidden="true">3.2.73.</strong> E073</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E074.html"><strong aria-hidden="true">3.2.74.</strong> E074</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E075.html"><strong aria-hidden="true">3.2.75.</strong> E075</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E076.html"><strong aria-hidden="true">3.2.76.</strong> E076</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E077.html"><strong aria-hidden="true">3.2.77.</strong> E077</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E078.html"><strong aria-hidden="true">3.2.78.</strong> E078</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E079.html"><strong aria-hidden="true">3.2.79.</strong> E079</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E080.html"><strong aria-hidden="true">3.2.80.</strong> E080</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E081.html"><strong aria-hidden="true">3.2.81.</strong> E081</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E082.html"><strong aria-hidden="true">3.2.82.</strong> E082</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E083.html"><strong aria-hidden="true">3.2.83.</strong> E083</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E084.html"><strong aria-hidden="true">3.2.84.</strong> E084</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E085.html"><strong aria-hidden="true">3.2.85.</strong> E085</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E086.html"><strong aria-hidden="true">3.2.86.</strong> E086</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E087.html"><strong aria-hidden="true">3.2.87.</strong> E087</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E088.html"><strong aria-hidden="true">3.2.88.</strong> E088</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E089.html"><strong aria-hidden="true">3.2.89.</strong> E089</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E090.html"><strong aria-hidden="true">3.2.90.</strong> E090</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E091.html"><strong aria-hidden="true">3.2.91.</strong> E091</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E092.html"><strong aria-hidden="true">3.2.92.</strong> E092</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E093.html"><strong aria-hidden="true">3.2.93.</strong> E093</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E094.html"><strong aria-hidden="true">3.2.94.</strong> E094</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E095.html"><strong aria-hidden="true">3.2.95.</strong> E095</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E096.html"><strong aria-hidden="true">3.2.96.</strong> E096</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E097.html"><strong aria-hidden="true">3.2.97.</strong> E097</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E098.html"><strong aria-hidden="true">3.2.98.</strong> E098</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E099.html"><strong aria-hidden="true">3.2.99.</strong> E099</a></li><li class="chapter-item "><a href="../using_rusty/error_configuration.md/E100.html"><strong aria-hidden="true">3.2.100.</strong> E100</a></li></ol></li></ol></li><li class="chapter-item "><div><strong aria-hidden="true">4.</strong> Writing ST Programs</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../libraries.html"><strong aria-hidden="true">4.1.</strong> Libraries</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../libraries/external_functions.html"><strong aria-hidden="true">4.1.1.</strong> External Functions</a></li><li class="chapter-item "><a href="../libraries/api_lib_guide.html"><strong aria-hidden="true">4.1.2.</strong> API guidelines</a></li></ol></li><li class="chapter-item "><div><strong aria-hidden="true">4.2.</strong> Using in external programs</div></li></ol></li><li class="chapter-item "><a href="../pous.html"><strong aria-hidden="true">5.</strong> POUs</a></li><li class="chapter-item "><a href="../variables.html"><strong aria-hidden="true">6.</strong> Variables</a></li><li class="chapter-item "><a href="../datatypes.html"><strong aria-hidden="true">7.</strong> Datatypes</a></li><li class="chapter-item "><a href="../direct_variables.html"><strong aria-hidden="true">8.</strong> Direct Bit Access</a></li><li class="chapter-item expanded "><a href="../arch/architecture.html"><strong aria-hidden="true">9.</strong> Architecture</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../arch/parser.html"><strong aria-hidden="true">9.1.</strong> Parser</a></li><li class="chapter-item "><a href="../arch/indexer.html"><strong aria-hidden="true">9.2.</strong> Indexer & Symbol-Table</a></li><li class="chapter-item expanded "><a href="../arch/linker.html" class="active"><strong aria-hidden="true">9.3.</strong> Linker</a></li><li class="chapter-item "><a href="../arch/validation.html"><strong aria-hidden="true">9.4.</strong> Validation</a></li><li class="chapter-item "><a href="../arch/codegen.html"><strong aria-hidden="true">9.5.</strong> Codegen</a></li></ol></li><li class="chapter-item "><a href="../cfc/cfc.html"><strong aria-hidden="true">10.</strong> CFC</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../cfc/m2m.html"><strong aria-hidden="true">10.1.</strong> Model-to-Model Conversion</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">RuSTy User Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="linker"><a class="header" href="#linker">Linker</a></h1>
<p>The linker's task is to decide where all references in the source code point to.
There are different references in Structured Text:</p>
<ul>
<li>variable references
<code>x := 4</code> where <em>x</em> is a reference to the variable x.</li>
<li>type references
<code>i : MyFunctionBlock</code> where <em>MyFunctionBlock</em> is a reference to the declared FunctionBlock.</li>
<li>Program references
<code>PLC_PRG.x := 4</code> where <em>PLC_PRG</em> is a reference to a Program-POU called <em>PLC_PRG</em>.</li>
<li>Function references
<code>max(a, b)</code> where <em>max</em> is a reference to a Function-POU called <em>max</em>.</li>
</ul>
<p>So the linker decides where a reference points to. A reference has a corresponding declaration that matches the reference's name:</p>
<pre><code class="language-iecst">        PROGRAM PLC_PRG
             VAR

        ┌──────► x : INT;
        │
        │    END_VAR
        │
        └────┐
             │
             x := 3;
        END_PROGRAM
</code></pre>
<p>The linker's results will be used by the semantic validation step and by the code-generation.</p>
<p>The validator decides whether the name you put at a certain location is valid or not.
In order to decide whether a certain reference is valid or not, we need to know where it is pointing to, so whether we expect a variable, a datatype or something different.</p>
<p>The code-generation needs to know what certain names mean, in order to successfully generate the IR-code that reflects the behavior of your program.</p>
<h2 id="annotated-syntax-tree"><a class="header" href="#annotated-syntax-tree">Annotated Syntax Tree</a></h2>
<p>The AST generated by the parser is a pretty static data-structure.
So where should we store the linking information for a reference?
Even if we would add fields for potential linking-information to the AST, the ownership concepts of Rust would give us a hard time to fill this information piece by piece during linking.
So what we end up doing, is to use the <a href="https://en.wikipedia.org/wiki/Region-based_memory_management">arena-pattern</a> to handle the different lifetimes of the parts of an AST (the AST itself is constructed very early in the compilation process, where the linking information is allocated later).
We don't store the linking information directly in the AST, but we store it inside the mentioned arena-data-structure and link it with certain AST-elements.</p>
<p>The RuSTy linker stores the linking information in an arena called AnnotationMap.
The AnnotationMap can store two type of annotations for any AST-element.
So the first step is that we need a way to uniquely identify every single AST-node so we can use this ID as a key for the annotations stored in the AnnotationMap to automatically associate it with the given AST-Node.
The parser assigns a unique ID to every Statement-Tree-Node (Note that we only assign IDs to Statements, not every AST-Node).</p>
<p>So the expression <code>a + 3</code> now looks like this:</p>
<pre><code class="language-ignore">                      ┌─────────────────┐
                      │ BinaryOperation │
                      ├─────────────────┤
                      │  operator: Plus │
                      │  ID: 1          │
                      └──────┬──┬───────┘
                             │  │
                   left      │  │     right
                 ┌───────────┘  └──────────┐
                 │                         │
                 │                         │
                 ▼                         ▼
        ┌──────────────────┐     ┌──────────────────┐
        │    Reference     │     │  LiteralInteger  │
        ├──────────────────┤     ├──────────────────┤
        │    name: 'a'     │     │    value: '3'    │
        │    ID: 2         │     │    ID: 3         │
        └──────────────────┘     └──────────────────┘
</code></pre>
<p>The AnnotationMap stores 5 different types of annotation:</p>
<ul>
<li><code>Value</code>
The Value-annotation indicates that this AST-Element resolves to a value with the given resulting datatype.
So for Example the LiteralInteger(3) node gets a Value-Annotation with a resulting type of <code>DINT</code>.</li>
</ul>
<pre><code class="language-ignore">        ┌─────────────────────────┐
        │   Value                 │
        ├─────────────────────────┤
        │                         │
        │  resulting_type: String │
        │                         │
        └─────────────────────────┘
</code></pre>
<ul>
<li><code>Variable</code>
The Variable-annotation indicates that this AST-Element resolves to a variable with the given qualified name (and some comfort-information like whether it is a constant and whether it is an auto-deref pointer).
Similar to the value-Annotation it also saves the resulting datatype.</li>
</ul>
<pre><code class="language-ignore">        ┌─────────────────────────┐
        │   Variable              │
        ├─────────────────────────┤
        │                         │
        │  resulting_type: String │
        │  qualified_name: String │
        │  constant: bool         │
        │  is_auto_deref: bool    │
        │                         │
        └─────────────────────────┘
</code></pre>
<ul>
<li><code>Function</code>
The Function-annotation indicates that this AST-Element resolves to a Function-POU (a call-statement) with the given qualified name.
Similar to the value-Annotation it also saves the resulting datatype but this time as the function's return type (<em>return_type</em>).</li>
</ul>
<pre><code class="language-ignore">        ┌─────────────────────────┐
        │   Function              │
        ├─────────────────────────┤
        │                         │
        │  return_type: String    │
        │  qualified_name: String │
        │                         │
        └─────────────────────────┘
</code></pre>
<ul>
<li><code>Type</code>
The Type-annotation indicates that this AST-Element resolves to a DataType (e.g. a Declaration: <code>x: INT</code>) with the given name.</li>
</ul>
<pre><code class="language-ignore">        ┌─────────────────────────┐
        │   Type                  │
        ├─────────────────────────┤
        │                         │
        │  type_name: String      │
        │                         │
        └─────────────────────────┘
</code></pre>
<ul>
<li><code>Program</code>
The Program-annotation is very similar to the Function-annotation.
Since a Program has no return-value it also offers no return-type information.</li>
</ul>
<pre><code class="language-ignore">        ┌─────────────────────────┐
        │   Program               │
        ├─────────────────────────┤
        │                         │
        │  qualified_name: String │
        │                         │
        └─────────────────────────┘
</code></pre>
<p>So the example expression from above `a + 3* will be annotated like this:
(Note that the resulting type of the Binary-Operation must be calculated by the linker by determining the bigger of both types.)</p>
<pre><code class="language-ignore">                  ┌─────────────────┐
                  │ BinaryOperation │
                  ├─────────────────┤
                  │  operator: Plus │
                  │  ID: 1          │
                  └──────┬──┬───────┘
                         │  │
               left      │  │     right
             ┌───────────┘  └──────────┐
             │                         │
             │                         │
             ▼                         ▼
    ┌──────────────────┐     ┌──────────────────┐
    │    Reference     │     │  LiteralInteger  │
    ├──────────────────┤     ├──────────────────┤
    │    name: 'a'     │     │    value: '3'    │
    │    ID: 2         │     │    ID: 3         │
    └──────────────────┘     └──────────────────┘



                             ┌────────────────────────────┐
                             │        Value               │
┌───────────────────┐        ├────────────────────────────┤
│    AnnotationMap  │   ┌───►│  resulting_type: DINT      │
│                   │   │    │                            │
├───────┬───────────┤   │    └────────────────────────────┘
│ ID: 1 │ Value     ├───┘
├───────┼───────────┤        ┌────────────────────────────┐
│ ID: 2 │ Variable  ├────┐   │        Variable            │
├───────┼───────────┤    │   ├────────────────────────────┤
│ ID: 3 │ Value     ├──┐ │   │  resulting_type: SINT      │
└───────┴───────────┘  │ └──►│  qualified_name: PLC_PRG.a │
                       │     │        constant: false     │
                       │     │   is_auto_deref: false     │
                       │     └────────────────────────────┘
                       │
                       │     ┌────────────────────────────┐
                       │     │        Value               │
                       │     ├────────────────────────────┤
                       └────►│  resulting_type: DINT      │
                             │                            │
                             └────────────────────────────┘
</code></pre>
<p>Another example where the annotated AST carries a lot of useful information is with complex expressions like array-expressions or qualified references.
Lets consider the following statement:</p>
<pre><code class="language-iecst">PLC_PRG.a.b[2]
</code></pre>
<p>It is annotated in the following way:</p>
<pre><code class="language-ignore">                ┌────────────────────┐
                │ QualifiedReference │
                ├────────────────────┤
                │ ID: 1              │
                └─────────┬──────────┘
                          │          elements: Vec&lt;AstStatement&gt;
                ┌─────────┴──────────┬─────────────────────┐
                │                    │                     │
                ▼                    ▼                     ▼
        ┌──────────────────┐  ┌──────────────────┐  ┌──────────────────┐
        │    Reference     │  │    Reference     │  │   ArrayAccess    │
        ├──────────────────┤  ├──────────────────┤  ├──────────────────┤
        │  name: 'PLC_PRG' │  │  name: 'a'       │  │                  │
        │  ID: 2           │  │  ID: 3           │  │    ID: 4         │
        └──────────────────┘  └──────────────────┘  └─────┬──────┬─────┘
                                                          │      │
                                             reference    │      │       access
                                                 ┌────────┘      └─────────┐
                                                 ▼                         ▼
                                        ┌──────────────────┐   ┌──────────────────┐
                                        │    Reference     │   │  LiteralInteger  │
                                        ├──────────────────┤   ├──────────────────┤
                                        │  name: 'b'       │   │    value: '2'    │
                                        │  ID: 5           │   │    ID: 6         │
                                        └──────────────────┘   └──────────────────┘


                                     ┌────────────────────────────┐
                                     │        Value               │
                                ┌───►├────────────────────────────┤
                                │    │  resulting_type: INT       │
                                │    │                            │
                                │    └────────────────────────────┘
                                │
                                │    ┌────────────────────────────┐
        ┌───────────────────┐   │    │       Program              │
        │    AnnotationMap  │   │ ┌─►├────────────────────────────┤
        │                   │   │ │  │  qualified_name: PLC_PRG   │
        ├───────┬───────────┤   │ │  │                            │
        │ ID: 1 │ Value     ├───┘ │  └────────────────────────────┘
        ├───────┼───────────┤     │
        │ ID: 2 │ Program   ├─────┘  ┌────────────────────────────┐
        ├───────┼───────────┤        │        Variable            │
        │ ID: 3 │ Variable  ├───────►├────────────────────────────┤
        ├───────┼───────────┤        │ resulting_type: MyStruct   │
        │ ID: 4 │ Value     ├─────┐  │ qualified_name: PLC_PRG.a  │
        ├───────┼───────────┤     │  └────────────────────────────┘
        │ ID: 5 │ Variable  ├───┐ │
        ├───────┼───────────┤   │ │  ┌────────────────────────────┐
        │ ID: 6 │ Value     ├─┐ │ │  │        Value               │
        └───────┴───────────┘ │ │ └─►├────────────────────────────┤
                              │ │    │ resulting_type: INT        │
                              │ │    │                            │
                              │ │    └────────────────────────────┘
                              │ │
                              │ │    ┌─────────────────────────────────┐
                              │ │    │        Variable                 │
                              │ └───►├─────────────────────────────────┤
                              │      │ resulting_type : ARRAY[] OF INT │
                              │      │ qualified_name : MyStruct.b     │
                              │      └─────────────────────────────────┘
                              │
                              │      ┌────────────────────────────┐
                              │      │        Value               │
                              │      ├────────────────────────────┤
                              └─────►│ resulting_type: DINT       │
                                     │                            │
                                     └────────────────────────────┘
</code></pre>
<h2 id="type-vs-type-hint"><a class="header" href="#type-vs-type-hint">Type vs. Type-Hint</a></h2>
<p>The AnnotationMap not only offers annotations regarding the AST-node's type, but it also offers a second type of annotation.</p>
<p>Consider the following snippet:</p>
<pre><code class="language-iecst">PROGRAM PLC_PRG
   VAR
      x : SINT;
      y : INT;
      z : BYTE;
   END_VAR

   z := x + y;

END_PROGRAM
</code></pre>
<p>The assignment <code>z := x + y</code> is loaded with different types:</p>
<ul>
<li><code>x</code> is annotated as <em>Variable</em> of type <em>SINT</em> and will be auto-upgraded to <em>DINT</em>.</li>
<li><code>y</code> is annotated as <em>Variable</em> of type <em>INT</em> and will be auto-upgraded to <em>DINT</em>.</li>
<li><code>z</code> is annotated as <em>Variable</em> of type <em>BYTE</em>.</li>
<li><code>x + y</code> is annotated as <em>Value</em> of type <em>DINT</em> (the bigger of both).</li>
</ul>
<p>In order to make life easier for validation and code-generation we add an additional annotation to <code>x + y</code> to indicate, that while it technically results in a <em>DINT</em>, it should rather be treated as a <em>BYTE</em> since it is going to be assigned to <code>z</code>.
This second annotation is called the <em>type-hint</em>. It indicates that while it technically is not the real type of this expression, the program's semantic wants the compiler to treat it as this type.</p>
<p>The expression <code>z := x + y</code> is annotated like this:</p>
<div class="table-wrapper"><table><thead><tr><th>expression</th><th>type annotation</th><th>type-hint annotation</th><th>explanation</th></tr></thead><tbody>
<tr><td><code>x</code></td><td>SINT</td><td>DINT</td><td>auto-upgraded to DINT</td></tr>
<tr><td><code>y</code></td><td>INT</td><td>DINT</td><td>auto-upgraded to DINT</td></tr>
<tr><td><code>z</code></td><td>BYTE</td><td>-</td><td></td></tr>
<tr><td><code>x + y</code></td><td>DINT</td><td>BYTE</td><td>type-hint indicates that the resulting DINT needs to be cast to BYTE</td></tr>
</tbody></table>
</div>
<p>With the help of the type-hint annotations the validation can decide whether certain type-cast operations are valid very easily.
The code-generation steps can easily decide when to generate casts, by simply comparing a node's type annotation and it's type-hint annotation.</p>
<h2 id="dependencies"><a class="header" href="#dependencies">Dependencies</a></h2>
<p>When generating multiple units, the Linker will keep track of a dependency-tree for the unit.
This means that every datatype or global variable referenced directly or indirectly by the module will be marked as a dependency.
This information can then be used during the <a href="./codegen.html">codegen</a> period to only generated types and variables that are relevant to the unit.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../arch/indexer.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../arch/validation.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../arch/indexer.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../arch/validation.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../iecst.min.js"></script>
        <script src="../llvm.min.js"></script>
        <script src="../custom.js"></script>
        <script src="../highlight.js"></script>


    </div>
    </body>
</html>
