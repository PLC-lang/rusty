---
source: src/codegen/tests/generics_test.rs
expression: codegen(src)
---
; ModuleID = '<internal>'
source_filename = "<internal>"
target datalayout = "[filtered]"
target triple = "[filtered]"

%prg = type { i16, i16, i64 }

@prg_instance = global %prg zeroinitializer

define i16 @foo__INT(i64 %0, ptr %1) {
entry:
  %foo__INT = alloca i16, align 2
  %in1 = alloca i64, align 8
  store i64 %0, ptr %in1, align 8
  %out1 = alloca ptr, align 8
  store ptr %1, ptr %out1, align 8
  store i16 0, ptr %foo__INT, align 2
  %foo__INT_ret = load i16, ptr %foo__INT, align 2
  ret i16 %foo__INT_ret
}

define void @prg(ptr %0) {
entry:
  %theInt = getelementptr inbounds nuw %prg, ptr %0, i32 0, i32 0
  %iResult = getelementptr inbounds nuw %prg, ptr %0, i32 0, i32 1
  %data = getelementptr inbounds nuw %prg, ptr %0, i32 0, i32 2
  %load_data = load i64, ptr %data, align 8
  %call = call i16 @foo__INT(i64 %load_data, ptr %theInt)
  store i16 %call, ptr %iResult, align 2
  ret void
}
