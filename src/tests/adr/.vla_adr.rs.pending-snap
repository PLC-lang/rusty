{"run_id":"1692628077-573282785","line":386,"new":{"module_name":"rusty__tests__adr__vla_adr","snapshot_name":"access","metadata":{"source":"src/tests/adr/vla_adr.rs","assertion_line":385,"expression":"codegen(src)"},"snapshot":"; ModuleID = 'main'\nsource_filename = \"main\"\n\n%__foo_arr = type { i32*, [2 x i32] }\n\n@____foo_arr__init = unnamed_addr constant %__foo_arr zeroinitializer\n\ndefine i32 @foo(%__foo_arr* %0) {\nentry:\n  %foo = alloca i32, align 4\n  %arr = alloca %__foo_arr*, align 8\n  store %__foo_arr* %0, %__foo_arr** %arr, align 8\n  store i32 0, i32* %foo, align 4\n  %tmpVar = getelementptr inbounds %__foo_arr*, %__foo_arr** %arr, i32 -64\n  store i32 12345, %__foo_arr** %tmpVar, align 4\n  %foo_ret = load i32, i32* %foo, align 4\n  ret i32 %foo_ret\n}\n"},"old":{"module_name":"rusty__tests__adr__vla_adr","metadata":{},"snapshot":"; ModuleID = 'main'\nsource_filename = \"main\"\n\n%__foo_arr = type { i32*, [2 x i32] }\n\n@____foo_arr__init = unnamed_addr constant %__foo_arr zeroinitializer\n\ndefine i32 @foo(%__foo_arr* %0) {\nentry:\n  %foo = alloca i32, align 4\n  %arr = alloca %__foo_arr*, align 8\n  store %__foo_arr* %0, %__foo_arr** %arr, align 8\n  store i32 0, i32* %foo, align 4\n  %deref = load %__foo_arr*, %__foo_arr** %arr, align 8\n  %vla_arr_gep = getelementptr inbounds %__foo_arr, %__foo_arr* %deref, i32 0, i32 0\n  %vla_arr_ptr = load i32*, i32** %vla_arr_gep, align 8\n  %dim_arr = getelementptr inbounds %__foo_arr, %__foo_arr* %deref, i32 0, i32 1\n  %start_idx_ptr0 = getelementptr inbounds [2 x i32], [2 x i32]* %dim_arr, i32 0, i32 0\n  %end_idx_ptr0 = getelementptr inbounds [2 x i32], [2 x i32]* %dim_arr, i32 0, i32 1\n  %start_idx_value0 = load i32, i32* %start_idx_ptr0, align 4\n  %end_idx_value0 = load i32, i32* %end_idx_ptr0, align 4\n  %tmpVar = sub i32 0, %start_idx_value0\n  %arr_val = getelementptr inbounds i32, i32* %vla_arr_ptr, i32 %tmpVar\n  store i32 12345, i32* %arr_val, align 4\n  %foo_ret = load i32, i32* %foo, align 4\n  ret i32 %foo_ret\n}"}}
{"run_id":"1692628077-573282785","line":444,"new":{"module_name":"rusty__tests__adr__vla_adr","snapshot_name":"multi_dimensional","metadata":{"source":"src/tests/adr/vla_adr.rs","assertion_line":443,"expression":"codegen(src)"},"snapshot":"; ModuleID = 'main'\nsource_filename = \"main\"\n\n%__foo_arr = type { i32*, [4 x i32] }\n\n@____foo_arr__init = unnamed_addr constant %__foo_arr zeroinitializer\n\ndefine i32 @foo(%__foo_arr* %0) {\nentry:\n  %foo = alloca i32, align 4\n  %arr = alloca %__foo_arr*, align 8\n  store %__foo_arr* %0, %__foo_arr** %arr, align 8\n  store i32 0, i32* %foo, align 4\n  %tmpVar = getelementptr inbounds %__foo_arr*, %__foo_arr** %arr, i32 -127\n  store i32 12345, %__foo_arr** %tmpVar, align 4\n  %foo_ret = load i32, i32* %foo, align 4\n  ret i32 %foo_ret\n}\n"},"old":{"module_name":"rusty__tests__adr__vla_adr","metadata":{},"snapshot":"; ModuleID = 'main'\nsource_filename = \"main\"\n\n%__foo_arr = type { i32*, [4 x i32] }\n\n@____foo_arr__init = unnamed_addr constant %__foo_arr zeroinitializer\n\ndefine i32 @foo(%__foo_arr* %0) {\nentry:\n  %foo = alloca i32, align 4\n  %arr = alloca %__foo_arr*, align 8\n  store %__foo_arr* %0, %__foo_arr** %arr, align 8\n  store i32 0, i32* %foo, align 4\n  %deref = load %__foo_arr*, %__foo_arr** %arr, align 8\n  %vla_arr_gep = getelementptr inbounds %__foo_arr, %__foo_arr* %deref, i32 0, i32 0\n  %vla_arr_ptr = load i32*, i32** %vla_arr_gep, align 8\n  %dim_arr = getelementptr inbounds %__foo_arr, %__foo_arr* %deref, i32 0, i32 1\n  %start_idx_ptr0 = getelementptr inbounds [4 x i32], [4 x i32]* %dim_arr, i32 0, i32 0\n  %end_idx_ptr0 = getelementptr inbounds [4 x i32], [4 x i32]* %dim_arr, i32 0, i32 1\n  %start_idx_value0 = load i32, i32* %start_idx_ptr0, align 4\n  %end_idx_value0 = load i32, i32* %end_idx_ptr0, align 4\n  %start_idx_ptr1 = getelementptr inbounds [4 x i32], [4 x i32]* %dim_arr, i32 0, i32 2\n  %end_idx_ptr1 = getelementptr inbounds [4 x i32], [4 x i32]* %dim_arr, i32 0, i32 3\n  %start_idx_value1 = load i32, i32* %start_idx_ptr1, align 4\n  %end_idx_value1 = load i32, i32* %end_idx_ptr1, align 4\n  %1 = sub i32 %end_idx_value0, %start_idx_value0\n  %len_dim0 = add i32 1, %1\n  %2 = sub i32 %end_idx_value1, %start_idx_value1\n  %len_dim1 = add i32 1, %2\n  %accum = alloca i32, align 4\n  store i32 1, i32* %accum, align 4\n  %load_accum = load i32, i32* %accum, align 4\n  %product = mul i32 %load_accum, %len_dim1\n  store i32 %product, i32* %accum, align 4\n  %accessor_factor = load i32, i32* %accum, align 4\n  %adj_access0 = sub i32 0, %start_idx_value0\n  %adj_access1 = sub i32 1, %start_idx_value1\n  %accum1 = alloca i32, align 4\n  store i32 0, i32* %accum1, align 4\n  %multiply = mul i32 %adj_access0, %accessor_factor\n  %load_accum2 = load i32, i32* %accum1, align 4\n  %accumulate = add i32 %load_accum2, %multiply\n  store i32 %accumulate, i32* %accum1, align 4\n  %multiply3 = mul i32 %adj_access1, 1\n  %load_accum4 = load i32, i32* %accum1, align 4\n  %accumulate5 = add i32 %load_accum4, %multiply3\n  store i32 %accumulate5, i32* %accum1, align 4\n  %accessor = load i32, i32* %accum1, align 4\n  %arr_val = getelementptr inbounds i32, i32* %vla_arr_ptr, i32 %accessor\n  store i32 12345, i32* %arr_val, align 4\n  %foo_ret = load i32, i32* %foo, align 4\n  ret i32 %foo_ret\n}"}}
