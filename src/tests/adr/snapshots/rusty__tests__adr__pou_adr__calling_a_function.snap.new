---
source: src/tests/adr/pou_adr.rs
assertion_line: 169
expression: codegen(calling_prg.as_str())

---
; ModuleID = 'main'
source_filename = "main"

%prg_interface = type { i16, i16 }

@prg_instance = global %prg_interface zeroinitializer

define void @prg(%prg_interface* %0) {
entry:
  %x = getelementptr inbounds %prg_interface, %prg_interface* %0, i32 0, i32 0
  %z = getelementptr inbounds %prg_interface, %prg_interface* %0, i32 0, i32 1
  %call = call i32 @main_fun(i16* %x, i16* %z)
  ret void
}

define i32 @main_fun(i16* %0, i8* %1, i64* %2) {
entry:
  %i = alloca i16*, align 8
  store i16* %0, i16** %i, align 8
  %io = alloca i8*, align 8
  store i8* %1, i8** %io, align 8
  %o = alloca i64*, align 8
  store i64* %2, i64** %o, align 8
  %v = alloca i16, align 2
  %vt = alloca i16, align 2
  %main_fun = alloca i32, align 4
  store i16 1, i16* %v, align 2
  store i16 2, i16* %vt, align 2
  store i32 0, i32* %main_fun, align 4
  %main_fun_ret = load i32, i32* %main_fun, align 4
  ret i32 %main_fun_ret
}

